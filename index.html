<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AZ-204</title>
  <link rel="stylesheet" href="https://stackedit.io/style.css" />
</head>

<body class="stackedit">
  <div class="stackedit__left">
    <div class="stackedit__toc">
      
<ul>
<li><a href="#create-azure-app-service-web-apps">Create Azure App Service web apps</a>
<ul>
<li><a href="#explore-azure-app-service">Explore Azure App Service</a></li>
</ul>
</li>
</ul>

    </div>
  </div>
  <div class="stackedit__right">
    <div class="stackedit__html">
      <h1 id="create-azure-app-service-web-apps">Create Azure App Service web apps</h1>
<h2 id="explore-azure-app-service">Explore Azure App Service</h2>
<h3 id="examine-azure-app-service">Examine Azure App Service</h3>
<p>Azure App Service is an HTTP-based service for hosting web applications, REST APIs, and mobile back ends.<br>
Supported programming languages:</p>
<ul>
<li>.NET,</li>
<li>.NET Core,</li>
<li>Java,</li>
<li>Ruby,</li>
<li>Node.js,</li>
<li>PHP,</li>
<li>Python.<br>
Applications run and scale with ease on both Windows and Linux-based environments.</li>
</ul>
<h4 id="features">Features:</h4>
<ul>
<li>Built-in auto scale support: Baked into Azure App Service is the ability to scale up/down or scale out/in.</li>
<li>Continuous integration/deployment support: The Azure portal provides out-of-the-box continuous integration and deployment with Azure DevOps, GitHub, Bitbucket, FTP, or a local Git repository on your development machine.</li>
<li>Deployment slots: When you deploy your web app, web app on Linux, mobile back end, or API app to Azure App Service, you can use a separate deployment slot instead of the default production slot when you’re running in the Standard, Premium, or Isolated App Service plan tier.</li>
<li>App Service on Linux: App Service can also host web apps natively on Linux for supported application stacks.</li>
</ul>
<p>App Service on Linux does have some limitations:</p>
<ul>
<li>App Service on Linux is not supported on Shared pricing tier.</li>
<li>You can’t mix Windows and Linux apps in the same App Service plan.</li>
</ul>
<h3 id="examine-azure-app-service-plans">Examine Azure App Service plans</h3>
<p>In App Service, an app (Web Apps, API Apps, or Mobile Apps) always runs in an <em>App Service plan</em>. An App Service plan defines a set of compute resources for a web app to run. One or more apps can be configured to run on the same computing resources (or in the same App Service plan).</p>
<p>Each App Service plan defines:</p>
<ul>
<li>Region (West US, East US, etc.)</li>
<li>Number of VM instances</li>
<li>Size of VM instances (Small, Medium, Large)</li>
<li>Pricing tier (Free, Shared, Basic, Standard, Premium, PremiumV2, PremiumV3, Isolated)</li>
</ul>
<p>The <em>pricing tier</em> of an App Service plan determines what App Service features you get and how much you pay for the plan. There are a few categories of pricing tiers:</p>
<ul>
<li><strong>Shared compute</strong>: Both <strong>Free</strong> and <strong>Shared</strong> share the resource pools of your apps with the apps of other customers. These tiers allocate CPU quotas to each app that runs on the shared resources, and the resources can’t scale out.</li>
<li><strong>Dedicated compute</strong>: The <strong>Basic</strong>, <strong>Standard</strong>, <strong>Premium</strong>, <strong>PremiumV2</strong>, and <strong>PremiumV3</strong> tiers run apps on dedicated Azure VMs. Only apps in the same App Service plan share the same compute resources. The higher the tier, the more VM instances are available to you for scale-out.</li>
<li><strong>Isolated</strong>: This tier runs dedicated Azure VMs on dedicated Azure Virtual Networks. It provides network isolation on top of compute isolation to your apps. It provides the maximum scale-out capabilities.</li>
<li><strong>Consumption:</strong> This tier is only available to <em>function apps</em>. It scales the functions dynamically depending on workload.</li>
</ul>
<h4 id="how-does-my-app-run-and-scale">How does my app run and scale?</h4>
<p>The App Service plan is the <strong>scale unit</strong> of the App Service apps:</p>
<ul>
<li>An app runs on all the VM instances configured in the App Service plan.</li>
<li>If multiple apps are in the same App Service plan, they all share the same VM instances.</li>
<li>If you have multiple deployment slots for an app, all deployment slots also run on the same VM instances.</li>
<li>If you enable diagnostic logs, perform backups, or run WebJobs, they also use CPU cycles and memory on these VM instances.</li>
</ul>
<h4 id="what-if-my-app-needs-more-capabilities-or-features">What if my app needs more capabilities or features?</h4>
<p>Isolate your app into a new App Service plan when:</p>
<ul>
<li>The app is resource-intensive.</li>
<li>You want to scale the app independently from the other apps in the existing plan.</li>
<li>The app needs resource in a different geographical region.</li>
</ul>
<h3 id="deploy-to-app-service">Deploy to App Service</h3>
<h4 id="automated-deployment">Automated deployment</h4>
<p>Azure supports automated deployment directly from several sources. The following options are available:</p>
<ul>
<li>Azure DevOps</li>
<li>GitHub</li>
<li>Bitbucket</li>
</ul>
<h4 id="manual-deployment">Manual deployment</h4>
<p>There are a few options that you can use to manually push your code to Azure:</p>
<ul>
<li><strong>Git</strong>: App Service web apps feature a Git URL that you can add as a remote repository.</li>
<li><strong>CLI</strong>: <code>webapp up</code> is a feature of the <code>az</code> command-line interface that packages your app and deploys it.</li>
<li><strong>Zip deploy</strong>: Use <code>curl</code> or a similar HTTP utility to send a ZIP of your application files to App Service.</li>
<li><strong>FTP/S</strong>: FTP or FTPS is a traditional way of pushing your code to many hosting environments, including App Service.</li>
</ul>
<h4 id="use-deployment-slots">Use deployment slots</h4>
<p>Whenever possible, use deployment slots when deploying a new production build. When using a Standard App Service Plan tier or better, you can deploy your app to a staging environment and then swap your staging and production slots. The swap operation warms up the necessary worker instances to match your production scale, thus eliminating downtime.</p>
<h3 id="explore-authentication-and-authorization-in-app-service">Explore authentication and authorization in App Service</h3>
<p>Azure App Service provides built-in authentication and authorization support by writing minimal or no code.</p>
<h4 id="why-use-the-built-in-authentication">Why use the built-in authentication?</h4>
<p>The built-in authentication feature for App Service and Azure Functions can save you time and effort by providing out-of-the-box authentication with federated identity providers.</p>
<h4 id="identity-providers">Identity providers</h4>
<p>App Service uses federated identity, in which a third-party identity provider manages the user identities and authentication flow for you. The following identity providers are available by default:</p>
<ul>
<li>Microsoft Identity Platform</li>
<li>Facebook</li>
<li>Google</li>
<li>Twitter</li>
<li>Any OpenID Connect provider</li>
</ul>
<h5 id="how-it-works">How it works</h5>
<p>The authentication and authorization module runs in the same sandbox as your application code. When it’s enabled, every incoming HTTP request passes through it before being handled by your application code. This module handles several things for your app:</p>
<ul>
<li>Authenticates users with the specified provider</li>
<li>Validates, stores, and refreshes tokens</li>
<li>Manages the authenticated session</li>
<li>Injects identity information into request headers</li>
</ul>
<p>The module runs separately from your application code and is configured using app settings.</p>
<h5 id="authentication-flow">Authentication flow</h5>
<ul>
<li>Without provider SDK: The application delegates federated sign-in to App Service. This is typically the case with browser apps, which can present the provider’s login page to the user. The server code manages the sign-in process, so it is also called <em>server-directed flow</em> or <em>server flow</em>.</li>
<li>With provider SDK: The application signs users in to the provider manually and then submits the authentication token to App Service for validation. This is typically the case with browser-less apps, which can’t present the provider’s sign-in page to the user. The application code manages the sign-in process, so it is also called <em>client-directed flow</em> or <em>client flow</em>. This applies to REST APIs, Azure Functions, JavaScript browser clients, and native mobile apps that sign users in using the provider’s SDK.</li>
</ul>

<table>
<thead>
<tr>
<th>Step</th>
<th>Without provider SDK</th>
<th>With provider SDK</th>
</tr>
</thead>
<tbody>
<tr>
<td>Sign user in</td>
<td>Redirects client to <code>/.auth/login/&lt;provider&gt;</code>.</td>
<td>Client code signs user in directly with provider’s SDK and receives an authentication token. For information, see the provider’s documentation.</td>
</tr>
<tr>
<td>Post-authentication</td>
<td>Provider redirects client to <code>/.auth/login/&lt;provider&gt;/callback</code>.</td>
<td>Client code posts token from provider to <code>/.auth/login/&lt;provider&gt;</code> for validation.</td>
</tr>
<tr>
<td>Establish authenticated session</td>
<td>App Service adds authenticated cookie to response.</td>
<td>App Service returns its own authentication token to client code.</td>
</tr>
<tr>
<td>Serve authenticated content</td>
<td>Client includes authentication cookie in subsequent requests (automatically handled by browser).</td>
<td>Client code presents authentication token in <code>X-ZUMO-AUTH</code> header (automatically handled by Mobile Apps client SDKs).</td>
</tr>
</tbody>
</table><h5 id="authorization-behavior">Authorization behavior</h5>
<ul>
<li>Allow unauthenticated requests: This option defers authorization of unauthenticated traffic to your application code.</li>
<li>Require authentication: This option will reject any unauthenticated traffic to your application. This rejection can be a redirect action to one of the configured identity providers.</li>
</ul>
<h3 id="discover-app-service-networking-features">Discover App Service networking features</h3>
<p>By default, apps hosted in App Service are accessible directly through the internet and can reach only internet-hosted endpoints. But for many applications, you need to control the inbound and outbound network traffic.</p>
<p>Deployment-Types:</p>
<ul>
<li>Multi-Tenant pricing SKUs: Free, Shared, Basic, Standard, Premium, PremiumV2, and PremiumV3</li>
<li>Single-Tenant pricing SKU:  Isolated</li>
</ul>
<h4 id="multi-tenant-app-service-networking-features">Multi-tenant App Service networking features</h4>
<p>All the roles in an App Service deployment exist in a multi-tenant network. The roles that handle incoming HTTP or HTTPS requests are called <em>front ends</em>. The roles that host the customer workload are called <em>workers</em>.</p>
<p>Because there are many different customers in the same App Service scale unit, you can’t connect the App Service network directly to your network. Instead of connecting the networks, you need features to handle the various aspects of application communication.</p>

<table>
<thead>
<tr>
<th>Inbound features</th>
<th>Outbound features</th>
</tr>
</thead>
<tbody>
<tr>
<td>App-assigned address</td>
<td>Hybrid Connections</td>
</tr>
<tr>
<td>Access restrictions</td>
<td>Gateway-required virtual network integration</td>
</tr>
<tr>
<td>Service endpoints</td>
<td>Virtual network integration</td>
</tr>
<tr>
<td>Private endpoints</td>
<td></td>
</tr>
</tbody>
</table><p>The following inbound use cases are examples of how to use App Service networking features to control traffic inbound to your app.</p>

<table>
<thead>
<tr>
<th>Inbound use case</th>
<th>Feature</th>
</tr>
</thead>
<tbody>
<tr>
<td>Support IP-based SSL needs for your app</td>
<td>App-assigned address</td>
</tr>
<tr>
<td>Support unshared dedicated inbound address for your app</td>
<td>App-assigned address</td>
</tr>
<tr>
<td>Restrict access to your app from a set of well-defined addresses</td>
<td>Access restrictions</td>
</tr>
</tbody>
</table><h4 id="default-networking-behavior">Default networking behavior</h4>
<p>The Free and Shared SKU plans host customer workloads on multitenant workers. The Basic and higher plans host customer workloads that are dedicated to only one App Service plan.</p>
<h5 id="outbound-addresses">Outbound addresses</h5>
<p>The worker VMs are broken down in large part by the App Service plans.</p>
<ul>
<li>The Free, Shared, Basic, Standard, and Premium plans all use the same worker VM type.</li>
<li>The PremiumV2 plan uses another VM type.</li>
<li>PremiumV3 uses yet another VM type.<br>
When you change the VM family, you get a different set of outbound addresses.</li>
</ul>
<p>The outbound addresses used by your app for making outbound calls are listed in the properties for your app. These addresses are shared by all the apps running on the same worker VM family in the App Service deployment.</p>
<h5 id="find-outbound-ips">Find outbound IPs</h5>
<p>To find the outbound IP addresses currently used by your app in the Azure portal, click <strong>Properties</strong> in your app’s left-hand navigation. If you want to see all the addresses that your app might use in a scale unit, there’s a property called <code>possibleOutboundAddresses</code> that will list them.</p>
<h3 id="configure-web-app-settings">Configure web app settings</h3>
<h4 id="configure-application-settings">Configure application settings</h4>
<p>In App Service, app settings are variables passed as environment variables to the application code.</p>
<p><img src="https://docs.microsoft.com/en-us/learn/wwl-azure/configure-web-app-settings/media/configure-app-settings.png" alt="Navigating to Configuration > Application settings"><br>
For <a href="http://ASP.NET">ASP.NET</a> and <a href="http://ASP.NET">ASP.NET</a> Core developers, setting app settings in App Service are like setting them in <code>&lt;appSettings&gt;</code> in <em>Web.config</em> or <em>appsettings.json</em>, but the values in App Service override the ones in <em>Web.config</em> or <em>appsettings.json</em>.</p>
<p>App settings are always encrypted when stored (encrypted-at-rest).</p>
<h4 id="adding-and-editing-settings">Adding and editing settings</h4>

    </div>
  </div>
</body>

</html>
